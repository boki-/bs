<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>BullScript by mxcl</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <style>
    .inv { color: #3a11df; }
    .becomes {
      background: hsla(64, 17%, 40%, 0.55);
      color: white;
      text-transform: uppercase;
      padding: 0.5em;
      margin: -32px 4px 0 4px;
      text-align: center;
    }
    .becomes:after {
      content: "▼ Compiles to ▼";
      margin-left: 7px;
      font-weight: bold;
      letter-spacing: 2px;
    }
    .gone {
      font-weight: bold;
      color: transparent;
    }
    code {
      background: rgba(0,0,0,0.12);
    }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">BullScript</h1>
        <p class="header">JavaScript with less bull.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/mxcl/bs/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/mxcl/bs/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/mxcl/bs">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/mxcl">mxcl</a></p>


      </header>
      <section>
        <h1>what.bs</h1>

<p>BullScript is (yet another) language that compiles to Javascript.</p>

<p>Well actually, let’s not think about it like that. BullScript is
Javascript; Javascript with just a little sugar; Javascript even better suited
for web-development.
</p>

<p>At the end of your BullScript day, you are still writing Javascript, not
something else.</p>

<h1>examples.bs</h1>

<h2>Inline HTML</h2>

<p>Shouldn’t HTML be a proper type when you’re doing web-development?

<div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="s2">&lt;div class="abc"&gt;
            Hello &lt;a href="<span class="inv">#{href}</span>"&gt;<span class="inv">#{name}</span>&lt;/a&gt;, sup?
          &lt;/div&gt;</span>;
</pre></div>

<div class="becomes"></div>

<div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;div class="abc"&gt; '</span><span class="o">+</span>
              <span class="s1">'Hello &lt;a href="'</span> <span class="o">+</span> <span class="nx">href</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">'&lt;/a&gt;, sup? '</span><span class="o">+</span>
            <span class="s1">'&lt;/div&gt;'</span><span class="p">);</span>
</pre></div>

<h2>Variable Substitution</h2>

<p>Of course, Ruby-style variable substituions works in normal strings too:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">"Hello <span class="inv">#{name}</span>, ‘sup?"</span><span class="p">;</span></pre></div>

<div class="becomes"></div>

<div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">"Hello "</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">", ‘sup?"</span><span class="p">;</span>
</pre></div>

<h2>Multiline Strings</h2>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">"""Line one
<span class=gone>var=</span>         Line <span class="inv">#{two}</span>
<span class=gone>var=</span>         Line three"""</span></pre></div>

<div class="becomes"></div>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">"Line one\n"</span><span class="o">+</span>
<span class=gone>var=</span>      <span class="s2">"Line "</span> <span class="o">+</span> <span class="nx">two</span> <span class="o">+</span> <span class="s2">"\n"</span><span class="o">+</span>
<span class=gone>var=</span>      <span class="s2">"Line three"</span>
</pre></div>

<h2>Fancy Escaping</h2>

<div class="stack highlight"><pre><span class="s2">"foo <span class=inv>#n{bar}</span> jee"</span></pre></div>

<div class="becomes"></div>

<div class="stack highlight"><pre><span class="s2">"foo "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">bar</span> <span class="o">||</span> <span class="s1">''</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" jee"</span></pre></div>

<div class="stack highlight"><pre><span class="s2">"http://foo.com/<span class=inv>#x{bar}</span>/jee"</span></pre></div>

<div class="becomes"></div>

<div class="stack highlight"><pre><span class="s2">"http://foo.com/"</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">bar</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/jee"</span>
</pre></div>

<p>In fact there is more to this: they call through to bs.js so that the escapes
are more useful. <code>#n{}</code> will output an empty string for <code>null</code> and
<code>undefined</code>, while <code>#N{}</code> will do so for empty Arrays, Objects and anything
else that is <code>falsey</code>. <code>#x{}</code> does “pretty” escaping, ie. <code>encodeURIComponent</code> but
replacing <code>%20</code>s with <code>+</code>s, while <code>#N{}</code> does <em>full</em> escaping, that is
<code>encodeURIComponent</code> but it also encodes <code>!'()</code> which doesn’t hurt, but can
avoid certain categories of bug. If you want vanilla <code>encodeURIComponent</code> then
(currently) you’ll have to call it yourself.</p>

<h1>Using BullScript</h1>

<p>Currently we only have the compiler: <code>bsc</code>.</p>

<p>Use it in eg. Sinatra with something like this:</p>

<div class="highlight"><pre><span class="n">get</span> <span class="s1">'/*.js'</span> <span class="k">do</span> <span class="o">|</span><span class="n">fn</span><span class="o">|</span>
  <span class="sb">`./bsc </span><span class="si">#{</span><span class="n">fn</span><span class="si">}</span><span class="sb">.bs`</span>
<span class="k">end</span>
</pre></div>

<p>And when deploying just adapt your build-system to compile <code>bs</code> to <code>js</code>, eg.
for <code>make</code> here’s an implicit rule you can use:</p>

<div class="highlight"><pre><span class="nf">%.js</span><span class="o">:</span> <span class="m">%.bs</span>
    ./bsc <span class="nv">$&lt;</span> &gt; <span class="nv">$@</span>
</pre></div>

      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

  </body>
</html>
